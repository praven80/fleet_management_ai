"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[618],{618:(e,t,o)=>{o.d(t,{fromCognitoIdentityPool:()=>m});var n=o(9379),r=o(4705);class i extends Error{constructor(e){var t,o;let n,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=!0;if("boolean"===typeof s)n=void 0,l=s;else if(null!=s&&"object"===typeof s){var c;n=s.logger,l=null===(c=s.tryNextLink)||void 0===c||c}super(e),(0,r.A)(this,"name","ProviderError"),(0,r.A)(this,"tryNextLink",void 0),this.tryNextLink=l,Object.setPrototypeOf(this,i.prototype),null===(t=n)||void 0===t||null===(o=t.debug)||void 0===o||o.call(t,"@smithy/property-provider ".concat(l?"->":"(!)"," ").concat(e))}static from(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(new this(e.message,t),e)}}class s extends i{constructor(e){super(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),(0,r.A)(this,"name","CredentialsProviderError"),Object.setPrototypeOf(this,s.prototype)}}function l(e){return Promise.all(Object.keys(e).reduce((t,o)=>{const n=e[o];return"string"===typeof n?t.push([o,n]):t.push(n().then(e=>[o,e])),t},[])).then(e=>e.reduce((e,t)=>{let[o,n]=t;return e[o]=n,e},{}))}function c(e){throw new s("Response from Amazon Cognito contained no access key ID",{logger:e})}function d(e){throw new s("Response from Amazon Cognito contained no credentials",{logger:e})}function a(e){throw new s("Response from Amazon Cognito contained no secret key",{logger:e})}const u="IdentityIds";class g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aws:cognito-identity-ids";(0,r.A)(this,"dbName",void 0),this.dbName=e}getItem(e){return this.withObjectStore("readonly",t=>{const o=t.get(e);return new Promise(e=>{o.onerror=()=>e(null),o.onsuccess=()=>e(o.result?o.result.value:null)})}).catch(()=>null)}removeItem(e){return this.withObjectStore("readwrite",t=>{const o=t.delete(e);return new Promise((e,t)=>{o.onerror=()=>t(o.error),o.onsuccess=()=>e()})})}setItem(e,t){return this.withObjectStore("readwrite",o=>{const n=o.put({id:e,value:t});return new Promise((e,t)=>{n.onerror=()=>t(n.error),n.onsuccess=()=>e()})})}getDb(){const e=self.indexedDB.open(this.dbName,1);return new Promise((t,o)=>{e.onsuccess=()=>{t(e.result)},e.onerror=()=>{o(e.error)},e.onblocked=()=>{o(new Error("Unable to access DB"))},e.onupgradeneeded=()=>{const t=e.result;t.onerror=()=>{o(new Error("Failed to create object store"))},t.createObjectStore(u,{keyPath:"id"})}})}withObjectStore(e,t){return this.getDb().then(o=>{const n=o.transaction(u,e);return n.oncomplete=()=>o.close(),new Promise((e,o)=>{n.onerror=()=>o(n.error),e(t(n.objectStore(u)))}).catch(e=>{throw o.close(),e})})}}const v=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.A)(this,"store",void 0),this.store=e}getItem(e){return e in this.store?this.store[e]:null}removeItem(e){delete this.store[e]}setItem(e,t){this.store[e]=t}};function h(){return"object"===typeof self&&self.indexedDB?new g:"object"===typeof window&&window.localStorage?window.localStorage:v}function p(e){let{accountId:t,cache:n=h(),client:r,clientConfig:i,customRoleArn:s,identityPoolId:u,logins:g,userIdentifier:v=(g&&0!==Object.keys(g).length?void 0:"ANONYMOUS"),logger:p,parentClientConfig:m}=e;null===p||void 0===p||p.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const y=v?"aws:cognito-identity-credentials:".concat(u,":").concat(v):void 0;let f=async e=>{const{GetIdCommand:v,CognitoIdentityClient:h}=await o.e(241).then(o.bind(o,4241)),I=t=>{var o,n,r;return null!==(o=null!==(n=null===i||void 0===i?void 0:i[t])&&void 0!==n?n:null===m||void 0===m?void 0:m[t])&&void 0!==o?o:null===e||void 0===e||null===(r=e.callerClientConfig)||void 0===r?void 0:r[t]},b=null!==r&&void 0!==r?r:new h(Object.assign({},null!==i&&void 0!==i?i:{},{region:I("region"),profile:I("profile"),userAgentAppId:I("userAgentAppId")}));let C=y&&await n.getItem(y);if(!C){const{IdentityId:e=w(p)}=await b.send(new v({AccountId:t,IdentityPoolId:u,Logins:g?await l(g):void 0}));C=e,y&&Promise.resolve(n.setItem(y,C)).catch(()=>{})}var A;return A={client:b,customRoleArn:s,logins:g,identityId:C},f=async e=>{var t,n,r;null===(t=A.logger)||void 0===t||t.debug("@aws-sdk/credential-provider-cognito-identity - fromCognitoIdentity");const{GetCredentialsForIdentityCommand:i,CognitoIdentityClient:s}=await o.e(241).then(o.bind(o,4241)),u=t=>{var o,n,r,i,s;return null!==(o=null!==(n=null===(r=A.clientConfig)||void 0===r?void 0:r[t])&&void 0!==n?n:null===(i=A.parentClientConfig)||void 0===i?void 0:i[t])&&void 0!==o?o:null===e||void 0===e||null===(s=e.callerClientConfig)||void 0===s?void 0:s[t]},{Credentials:{AccessKeyId:g=c(A.logger),Expiration:v,SecretKey:h=a(A.logger),SessionToken:p}=d(A.logger)}=await(null!==(n=A.client)&&void 0!==n?n:new s(Object.assign({},null!==(r=A.clientConfig)&&void 0!==r?r:{},{region:u("region"),profile:u("profile"),userAgentAppId:u("userAgentAppId")}))).send(new i({CustomRoleArn:A.customRoleArn,IdentityId:A.identityId,Logins:A.logins?await l(A.logins):void 0}));return{identityId:A.identityId,accessKeyId:g,secretAccessKey:h,sessionToken:p,expiration:v}},f(e)};return e=>f(e).catch(async e=>{throw y&&Promise.resolve(n.removeItem(y)).catch(()=>{}),e})}function w(e){throw new s("Response from Amazon Cognito contained no identity ID",{logger:e})}const m=e=>p((0,n.A)({},e))}}]);
//# sourceMappingURL=618.c5ca5a81.chunk.js.map